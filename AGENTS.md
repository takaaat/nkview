# Repository Guidelines

## プロジェクト構成とモジュール配置
- `src/` にアプリ本体があり、`main.tsx` でルートを生成し `App.tsx` が画面ロジックを担います。`src/assets/` はアイコンや画像などの軽量アセット置き場で、不要な大容量ファイルはここに置かず CDN やバックエンドを利用してください。
- `public/` はビルド時にそのまま配信される静的ファイル用ディレクトリです。`robots.txt` や外部ホスティングで必要なメタファイルを配置します。
- `vite.config.ts` と `tsconfig.*` でビルド経路が分かれており、アプリコードは `tsconfig.app.json`、ツール類は `tsconfig.node.json` を参照します。設定を変更する際は両方の整合性を確認してください。

## ビルド・テスト・開発コマンド
- `npm install` 依存関係を同期します。新しいパッケージを追加したら `package-lock.json` の差分を確認してください。
- `npm run dev` Vite の開発サーバーを起動し、デフォルトで http://localhost:5173/ を開きます。
- `npm run build` TypeScript の型チェック (`tsc -b`) 実行後に最適化ビルドを生成します。CI でもこのコマンドをそのまま使用してください。
- `npm run preview` 生成済み `dist/` をローカルサーバーで確認します。リリース前の最終動作確認に利用します。
- `npm run lint` ESLint (TypeScript + React Hooks + Refresh ルール) を走らせます。プッシュ前に必ず実行し、警告やエラーを解消してください。

## コーディングスタイルと命名規約
- TypeScript (ES2020) を採用し、関数コンポーネントは PascalCase、フックやユーティリティは camelCase、CSS クラスは kebab-case を基本とします。JSX のインデントはスペース 2 個、波括弧内の式も同様です。
- Props の型は `type` エイリアスで宣言し、共有したい型は `src/` 直下に `types/` ディレクトリを作って集約します。マジックナンバーは定数に切り出し、ユニット変換や URL は `constants.ts` 等へまとめてください。
- ESLint により不要な依存・未使用変数・フックの依存配列が検出されます。自動修正が可能な場合は `npm run lint -- --fix` の使用を検討してください。

## テスト指針
- まだ公式なテストランナーは追加されていません。UI を保護する際は Vitest + React Testing Library の導入を想定し、`src/` 配下に `*.test.tsx` を配置します。
- 状態管理のロジック単位は純粋関数として切り出し、将来的なユニットテストで 80% 以上の分岐カバレッジを目標にしてください。副作用を含むフックはモックを使って検証します。
- スナップショットテストを導入する場合、UI の揺らぎを抑えるために日付・乱数は明示的にスタブ化します。

## 環境設定とセキュリティの注意
- Vite の環境変数は `VITE_` プレフィックスが付いた項目のみクライアントに公開されます。秘匿情報は `VITE_` を付けないまま `.env.local` に配置し、`.env.example` にダミー値を追加して共有してください。
- 開発サーバーのポートを変更する場合は `vite.config.ts` で `server.port` を指定し、README とデプロイスクリプトを同期させます。社内プロキシ環境では `npm run dev -- --host 0.0.0.0` を併用します。
- 依存性は四半期ごとに `npm outdated` で棚卸しし、重大な脆弱性が報告されたパッケージは `npm audit fix` で早期に更新します。更新後は必ず `npm run build` とスモークテストを実施してください。

## コミットとプルリクエスト運用
- 現在の履歴は初期コミット (`init`) のみです。今後は `feat:`, `fix:`, `refactor:` など Conventional Commits に沿って概要を一文で書き、ボディに理由や影響範囲を簡潔に記述してください。
- プルリクエストでは変更目的、主要な UI 差分 (該当する場合はスクリーンショット)、テスト実行結果 (`npm run lint` や手動確認内容) を箇条書きで示します。関連 Issue があれば `Closes #番号` を本文に含めてください。
- レビュー前に `npm run build` と `npm run lint` を通し、破壊的変更があれば README や関連ドキュメントを更新することを忘れないでください。
